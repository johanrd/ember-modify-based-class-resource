{"version":3,"file":"manager.js","sources":["../../../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/core/class-based/manager.ts"],"sourcesContent":["export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","// @ts-ignore\nimport { createCache, getValue } from '@glimmer/tracking/primitives/cache';\nimport { associateDestroyableChild } from '@ember/destroyable';\n// @ts-ignore\nimport { capabilities as helperCapabilities, setHelperManager } from '@ember/helper';\n\nimport { Resource } from './resource';\n\nimport type { ArgsWrapper } from '[core-types]';\nimport type Owner from '@ember/owner';\n\nclass ResourceManager {\n  capabilities = helperCapabilities('3.23', {\n    hasValue: true,\n    hasDestroyable: true,\n  });\n\n  constructor(protected owner: Owner) {}\n\n  createHelper(Class: typeof Resource, args: ArgsWrapper) {\n    let owner = this.owner;\n\n    let instance: Resource<ArgsWrapper>;\n\n    let cache: Cache = createCache(() => {\n      if (instance === undefined) {\n        instance = new Class(owner);\n\n        associateDestroyableChild(cache, instance);\n      }\n\n      if (instance.modify) {\n        instance.modify(args.positional, args.named);\n      }\n\n      return instance;\n    });\n\n    return cache;\n  }\n\n  getValue(cache: Cache) {\n    let instance = getValue(cache);\n\n    return instance;\n  }\n\n  getDestroyable(cache: Cache) {\n    return cache;\n  }\n}\n\nsetHelperManager((owner: Owner) => new ResourceManager(owner), Resource);\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","_toPropertyKey","arg","key","_defineProperty","obj","value","toPropertyKey","Object","defineProperty","enumerable","configurable","writable","ResourceManager","owner","helperCapabilities","hasValue","hasDestroyable","createHelper","Class","args","instance","cache","createCache","associateDestroyableChild","modify","positional","named","getValue","getDestroyable","setHelperManager","Resource"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}